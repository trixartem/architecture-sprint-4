## Планирование: анализ, идентификация проблем и поиск решений
### Проблемы на стороне пользователей системы
- Клиенты не получили заказ воремя, хотя производство справляется. Несколько месяцев вместо 3х недель.
- Открыли свой API и жалоб стало больше
- Операторы долго не могут попасть на страницу с заказами, что вляиет на их доход

Паттрны
- Масштабируемость
- Мониторинг и наблюдаемость
- Управление сложностью
- Надежность
- Согласованность данных

### Список проблем
1. Есть сложность с поддержкой. У каждого клиента свое API, а значит менять контракты будет накладно для разработки, также это будет мешать отслеживанию всех запросов в систему
2. Низкая наблюдаемость системы - нет мониторингов, логирования. Это будет создавать проблемы при поддержке сервиса и поиску проблем. Так же невозможно анализировать систему, какая нагрузка, какая используемость ресурсов, как быстро пользователи получают ответ, много ли в системе ошибок.
2. У CRMAPI отсутствует своя БД. У каждго сервиса лучше иметь свою базу данных. Это позволит сделать сервис автономным и повысит масштабируемость системы в целом. Инциденты не влияют на смежные системы и разрабатывать и деплоить проще независимые системы.
2. Недостаточно физических ресурсов. Все экземпляры по одному инстансу, а нагрузка увеличилась
3. База данных в виде одного инстанса работает на чтение и на запись
4. "MES API" используется для внешнего API и для работы операторов. Бэкенд становится нагруженным и кто-то из потребителей будет страдать
5. Нет кэшей, которые могли бы ускорить отображение данных в MEX и CRM

### Инициативы
1. Добавить для БД(MES DB) репликацию, так что бы отдельный инстанс(master) работал на запись и отдельно slave на чтение
	- Не будет нагружать БД, когда идет большой поток записи. Клиент сможет вычитывать существующие данные
2. Добавить кэш на изменение статуса заказа. При записи обновлять кэш writeThrought
	- Для CRM важно видеть актуальный статус, при этом статус меняется только при его изменении. Значит можно добавить кэш, которые сбрасывается при обновлении статуса. Поможет ускорить CRM на чтение данных
3. MES API разделить на 2 части: для операторов и для пользователей
	- Сделает сервисы независимыми, что увеличивает отказоустойчивость и масштабирование разных частей системы при необходимости
4. Добавить мониторинг, логирование, что бы следить за состоянием системы
5. Использовать подход backpressuer для внешнего API
	- Потенциально внешнее АПИ может создавать большую нагрузку для системы, поэтому важно уметь ее снимать, что бы не положить сервис целиком
6. Для CRM  так же стоит выделить отдельную БД, что бы увеличить отказоустойчивость
7. Добавить трейсинг запросов для возможности анализировать запросы
8. Добавить API Gateway для централизации запросов

### Первые 3 пункта
1. Добавить логи и мониторинги. Поможет дегностировать проблемы
2. Реплицировать БД. Поможет ускорить CRM
3. MES API разделить на 2 части: для операторов и для пользователей. Уменьшит риск падения всей системы MES

**Итого:** эти пункты направлены на масштабирование под увеличение нагрузки, увеличение отказоустойчивости и умение превентивно реагировать на проблемы, а не только узнавать от пользователей о проблемах
